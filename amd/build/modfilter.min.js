define(["jquery","core/str"],function(a,b){var d,e,g,c={},f=!1,h=function(f){d=f,b.get_strings([{key:"all",component:"moodle"},{key:"none",component:"moodle"},{key:"select",component:"moodle"},{key:"showtypes",component:"backup"},{key:"hidetypes",component:"backup"}]).done(function(b){c.all=b[0],c.none=b[1],c.select=b[2],c.showtypes=b[3],c.hidetypes=b[4];var f=a("#mform1 .card.block").first();e=f.parent("form").prop("id");var h=l("included",c.select);h+=m('(<a id="downloadcenter-bytype" href="#">'+c.showtypes+"</a>)","");var n=a(document.createElement("div"));n.addClass("grouped_settings section_level block card"),n.html(h),n.insertBefore(f),g=a(document.createElement("div")),g.prop("id","mod_select_links"),g.appendTo(n),g.hide();for(var o in d)if(d.hasOwnProperty(o)){h=l("mod_"+o,d[o]);var p=a(document.createElement("div"));p.addClass("grouped_settings section_level"),p.html(h),p.appendTo(g),j(p,o)}a("#downloadcenter-all-included").click(function(a){k(a,!0,"item_")}),a("#downloadcenter-none-included").click(function(a){k(a,!1,"item_")}),a("#downloadcenter-bytype").click(function(){i()})})},i=function(){var b=a("#downloadcenter-bytype");f?b.text(c.showtypes):b.text(c.hidetypes),g.animate({height:"toggle"},500,"swing"),f=!f},j=function(b,c){a("#downloadcenter-all-mod_"+c).click(function(a){k(a,!0,"item_",c)}),a("#downloadcenter-none-mod_"+c).click(function(a){k(a,!1,"item_",c)})},k=function(b,c,d,f){b.preventDefault();var g="";void 0!==f&&(g="item_"+f+"_");var h=d.length;a('input[type="checkbox"]').each(function(b,e){e=a(e);var f=e.prop("name");g&&f.substring(0,g.length)!==g||f.substring(0,h)===d&&e.prop("checked",c)}),e&&M.form&&M.form.updateFormState(e)},l=function(a,b){var d='<a id="downloadcenter-all-'+a+'" href="#">'+c.all+'</a> / <a id="downloadcenter-none-'+a+'" href="#">'+c.none+"</a>";return m(b,d)},m=function(a,b){return'<div class="form-group row fitem downloadcenter_selector"><div class="col-md-3"></div><div class="col-md-9"><label><span class="itemtitle">'+a+'</span></label><span class="text-nowrap">'+b+"</span></div></div>"};return{init:function(a){return new h(a)}}});